% LINGI2255 - Software Development Project
% Phase 2 - Architecture report
% Framework choice
\documentclass[11pt, a4paper]{article}   	% use "amsart" instead of "article" for AMSLaTeX format
\usepackage[utf8]{inputenc}
\usepackage[UKenglish]{babel}
\usepackage{graphicx}

\usepackage{amssymb}
\usepackage{xcolor}
\usepackage{hyperref}
\usepackage{url}

\newcommand{\tbf}[1]{\textbf{#1}}
\newcommand{\tit}[1]{\textit{#1}}


\title{Brief Article}
\author{The Author}
%\date{}							% Activate to display a given date or no date

\begin{document}
%\maketitle

\section{Simulator}

We chose Selenium\footnote{\url{http://www.seleniumhq.org/}} to automate the testing of the web application.
An interesting feature is that we can actually see the actions performed in real time.

Selenium is composed of different components, but the one that we're interested in is the Selenium WebDriver\footnote{\url{http://www.seleniumhq.org/projects/webdriver/}}. % with the Selenium-Server
Its purpose is to drive a browser natively, either on a local or remote machine.
It gives the ability to send commands to a browser and to retrieve the results.
The Selenium WebDriver uses specific drivers to interact with browsers.
There are drivers for multiple browsers, including Chrome, Firefox and the Android browser.

\medskip
The tests can be written in multiple languages, including Java, Python and Ruby.
We chose to use Python because it is a simple, yet powerful language, and we will also use it for the web application.

\medskip
The simulator will not be integrated with the rest of the web application, because they are made for different purposes.
It will be useful to stress our system and to see how it adapts to such situations.
It will give us an idea of how the system performs in real conditions.


\section{Extension}

The extension we have been forced to implement is social media.
It consists of allowing the users to login with a Facebook or Google account.
We decided to add the possibility to sign in with a Twitter account, because we think it could allow more users to easily use the web application.

\medskip
As we will be using the Django framework to build the web application, there are many packages available that can be installed to extend the possibilities of the application.
We searched for one that could help us for this task, and we chose to use the Django-Allauth\footnote{\url{https://www.djangopackages.com/packages/p/django-allauth/}} package to manage users authentication with Facebook, Google, or Twitter.
It is an interesting package because it supports a lot of authentication services, so that we could add more in the future if it is relevant.

\medskip
Because the extension is tightly coupled with core functionalities of the application (login, post demands, respond to demands), it will have to be integrated into the system, and will interact with other elements of the architecture.




\section{Sequence diagrams}

For the sequence diagrams we picked the same use cases than the activity diagrams because in our first report it lacked some details.
In the second report, we added the create account sequence diagram because it is a important part of the software and it was missing from our first report.

In this report, we have modified some of the sequence diagrams taking into account the remarks made after our second report.

\figure{requestingHelp}

On figure {requestingHelp} : The user need some help and he is going to create a new request. For that he click on the "I need help"
and he is redirected to a page where he needs to fill in informations about the jobs. Afterward the system check the data entered by the user.
If it is correct create the request and add it to the list of request on the home page. The system also send a notification to the members that
correspond to the criterias of the request using their preferences. If the data are not correct it send an error message to the user.

The main modification on figure {requestingHelp} is that the action "publish on home page" is now done by the system. You can see below the modified 
diagrams and their descriptions.

\figure{completeAJob}

On figure {completeAJob} : The user has completed a job and want to get time credit for it. For that he needs to go to the pending actions page (list all the jobs that the member accepted but did not completed yet) and select the corresponding job. He will then fill informations about the job and confirm. 

The system will send a notification to the demanding member (member which has been helped) and this member need to confirm that the job has been done correctly.

Unfortunatly it can happen that the member does not confirm because for example, he has no internet access. In this case, after some times, the system will send a message to the branch officer and ask him to confirm by himself.

The main modification on figure {completeAJob} is that the system send a message to the branch officer if the demanding member does not confirm after a certain period of time. (I didn't find a way to show the waiting time)

\subsection{Login with Social Media}

In this report, we also added a new sequence diagram called "LoginWithSocialMedia". We did that becaus in the second report we talked about the social media extension but we did not explain how we will integrate it in our own software.

\figure{LoginWithSocialMedia}

On the figure {LoginWithSocialMedia} you can see that the client wants to authenticate using a social media like Google+ or Facebook. These social medias all give the possibility to sign in on your web site using their account. Usually they have multiple way to do it but the most common one is throw javascript using a API. We choose that approach because we plan to support multiple social media.

In fact in this diagram the client directly use javascript to contact the social media API server to login. Than the social media API server check first if the credential are correct and second if the user already allowed this website to access his account and ask the user permission otherwise. 
Finally the server send back the token which will be use to authenticate the user for the API calls and the client will send some informations about his account to our application.

\section{Deployment diagram}

In the second report, our explanation was a bit too technical here is the main reason without all the technical details.

We choosed Nginx because it is a very light and efficient web server. We use it as a reverse proxy to avoid putting too much load on our application server (Gunicorn). The Gunicorn workers are like multiple application server which will handle the work. We didn't use another web server for exemple apache because Nginx is faster and better for the usage we want to do with our web server.

\section{Class diagrams}

For the class diagram there was a few mistakes and some missing features about the social media extension. 

We tried to correct this by modifying our main class diagram and creating new small diagrams.


\subsection{Main class diagram}

\figure{newMainClassDiagram}

On the figure {newMainClassDiagram} you can see some new things.

In our main class diagram we did the following changes :

\begin{itemize}
\item We added all the missing parameters to the function
\item We added new function to some classes 
\item We added type to attributes
\item We created new classes 
\end{itemize}

\subsubsection{class member}

The class member has now more functions :
\begin{itemize}
\item A function to share on a social Media like Facebook / Google+
\item Some functions to add/remove a user to/from their personnal network/favorite/ignored list.
\item Some functions to (un)subscribe to a branch.
\end{itemize}

\subsubsection{class help}

The class help has now function regarding searching for features and demands
\begin{itemize}
\item A function to get all the helps.
\item A function to get all the helps for a specific category.
\item A function to get all the helps depending on user preferences.
\end{itemize}

\subsection{Verified Member diagram}

\figure{verifiedMember}

On figure {verifiedMember} you can see new class diagram which describe in more details the attributes of the class.

The time availability, language and hobby are now seperate classes instead of attributes because they are not as simple as the other
attributes. 

\subsection{Preferences and Address diagrams}

\figure{preferencesAndAddress}

On figure {preferencesAndAddress} We represented the class address that we didn't do last time. And we also went into more details
for the class preferences which is not as simple as we would think it is. In fact you need time availibility and multiple mail preferences.

\end{document}
