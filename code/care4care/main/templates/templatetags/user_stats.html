{% load i18n %}
{% load staticfiles %}
<script src="{% static "js/statistics.js" %}"></script>
<link rel="stylesheet" type="text/css" href="{% static "css/statistics.css" %}" />

<div id="stats">
  <h3>
    <i class="fa fa-angle-right"></i>
    {% trans "Demandes" %}
  </h3>

  <div class="row">
    <div class="col-md-6">
      <div class="panel panel-default">
        <div class="panel-body">
          <h4>
            <i class="fa fa-angle-right"></i>
            {% trans "Types de jobs effectués" %}
          </h4>
          <canvas id="user_job_categories" width="475" height="200"></canvas>
        </div>
      </div>
    </div>

    <div class="col-md-6">
      <div class="panel panel-default">
        <div class="panel-body">
          <h4>
            <i class="fa fa-angle-right"></i>
            {% trans "Temps moyen par job" %}
          </h4>
          <canvas id="user_job_avg_time" width="475" height="200"></canvas>
        </div>
      </div>
    </div>
  </div>


  <div class="row">
    <div class="col-md-6">
      <div class="panel panel-default">
          <div class="panel-body">
            <h4>
              <i class="fa fa-angle-right"></i>
              {% trans "Demandes de jobs effectuées les 6 derniers mois" %}
            </h4>
          <canvas id="user_jobs_amount" width="475" height="200"></canvas>
        </div>
      </div>
    </div>

    <div class="col-md-6">
      <div class="panel panel-default">
          <div class="panel-body">
            <h4>
              <i class="fa fa-angle-right"></i>
              {% trans "Kilomètres parcourus les 6 derniers mois" %}
            </h4>
          <canvas id="user_km" width="475" height="200"></canvas>
        </div>
      </div>
    </div>
  </div>


  <h3>
    <i class="fa fa-angle-right"></i>
    {% trans "Offres" %}
  </h3>

</div>
<script type="application/javascript">
var get_json_url = function(json_url, user_id) {
  return "/statistics/"+json_url+"/"+user_id+"/";
}
var user_job_stats_url = get_json_url("job_categories_json", {{ user_id }});
var user_job_avg_time_url = get_json_url("user_job_avg_time_json",{{ user_id }});
var user_km_url = get_json_url("user_km_json", {{ user_id }})
var user_jobs_amount_url = get_json_url("user_jobs_amount_json", {{ user_id }})

$(document).ready(function(){
  create_chart(user_job_stats_url, "user_job_categories", "Radar");
  create_chart(user_job_avg_time_url, "user_job_avg_time", "Radar");
  create_chart(user_km_url, "user_km", "Bar")
  create_chart(user_jobs_amount_url, "user_jobs_amount", "Bar")
});
</script>
